<div class="min-h-screen bg-linear-to-br from-slate-900 via-slate-800 to-slate-900 p-8">
  <div class="max-w-4xl mx-auto">
    <!-- Header -->
    <div class="flex items-center justify-between mb-8">
      <h1 class="text-3xl font-bold text-white tracking-tight">任務管理器</h1>
      <button
        (click)="navigateToNew()"
        class="px-5 py-2.5 bg-emerald-500 hover:bg-emerald-400 text-white font-medium rounded-lg transition-all duration-200 shadow-lg shadow-emerald-500/25 hover:shadow-emerald-400/40 flex items-center gap-2"
      >
        <lucide-icon [img]="Plus" class="w-5 h-5"></lucide-icon>
        新增任務
      </button>
    </div>

    <!-- Task List -->
    <div class="space-y-4">
      @for (task of tasks(); track task.id) {
        <div class="group bg-slate-800/50 backdrop-blur-sm border border-slate-700/50 rounded-xl p-5 hover:border-slate-600 transition-all duration-200 hover:shadow-xl hover:shadow-slate-900/50">
          <div class="flex items-start justify-between gap-4">
            <!-- Task Content -->
            <div class="flex-1 min-w-0">
              <div class="flex items-center gap-3 mb-2">
                <!-- Priority Badge -->
                @switch (task.priority) {
                  @case ('high') {
                    <span class="px-2.5 py-1 text-xs font-semibold rounded-full bg-rose-500/20 text-rose-400 border border-rose-500/30">高優先</span>
                  }
                  @case ('medium') {
                    <span class="px-2.5 py-1 text-xs font-semibold rounded-full bg-amber-500/20 text-amber-400 border border-amber-500/30">中優先</span>
                  }
                  @case ('low') {
                    <span class="px-2.5 py-1 text-xs font-semibold rounded-full bg-sky-500/20 text-sky-400 border border-sky-500/30">低優先</span>
                  }
                }
                <h3 class="text-lg font-semibold text-white truncate">{{ task.title }}</h3>
              </div>

              @if (task.description) {
                <p class="text-slate-400 text-sm mb-3 line-clamp-2">{{ task.description }}</p>
              }

              <div class="flex items-center gap-4 text-sm text-slate-500">
                <!-- Sub-tasks count -->
                @if (task.subTasks.length > 0) {
                  <span class="flex items-center gap-1.5">
                    <lucide-icon [img]="ClipboardList" class="w-4 h-4"></lucide-icon>
                    {{ task.subTasks.length }} 個子任務
                  </span>
                }

                <!-- Tags -->
                @if (task.tags.length > 0) {
                  <div class="flex items-center gap-2 flex-wrap">
                    @for (tag of task.tags; track tag) {
                      <span class="px-2 py-0.5 text-xs rounded-md bg-slate-700/50 text-slate-400">#{{ tag }}</span>
                    }
                  </div>
                }
              </div>
            </div>

            <!-- Actions -->
            <div class="flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity duration-200">
              <button
                (click)="navigateToEdit(task.id)"
                class="p-2 text-slate-400 hover:text-white hover:bg-slate-700/50 rounded-lg transition-colors duration-200"
                title="編輯"
              >
                <lucide-icon [img]="Pencil" class="w-5 h-5"></lucide-icon>
              </button>
              <button
                (click)="deleteTask(task.id)"
                class="p-2 text-slate-400 hover:text-rose-400 hover:bg-rose-500/10 rounded-lg transition-colors duration-200"
                title="刪除"
              >
                <lucide-icon [img]="Trash2" class="w-5 h-5"></lucide-icon>
              </button>
            </div>
          </div>
        </div>
      }       @empty {
        <!-- Empty State -->
        <div class="text-center py-16">
          <div class="inline-flex items-center justify-center w-16 h-16 rounded-full bg-slate-800/50 mb-4">
            <lucide-icon [img]="ClipboardList" class="w-8 h-8 text-slate-600"></lucide-icon>
          </div>
          <h3 class="text-lg font-medium text-slate-400 mb-2">尚無任務</h3>
          <p class="text-slate-500 mb-6">點擊上方按鈕建立你的第一個任務</p>
          <button
            (click)="navigateToNew()"
            class="px-5 py-2.5 bg-emerald-500 hover:bg-emerald-400 text-white font-medium rounded-lg transition-all duration-200"
          >
            建立第一個任務
          </button>
        </div>
      }
    </div>
  </div>
</div>

