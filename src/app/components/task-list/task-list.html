<div class="min-h-screen bg-linear-to-br from-slate-900 via-slate-800 to-slate-900 p-8">
  <div class="max-w-4xl mx-auto">
    <!-- Header -->
    <div class="flex items-center justify-between mb-8">
      <h1 class="text-3xl font-bold text-white tracking-tight">任務管理器</h1>
      <button
        (click)="navigateToNew()"
        class="px-5 py-2.5 bg-emerald-500 hover:bg-emerald-400 text-white font-medium rounded-lg transition-all duration-200 shadow-lg shadow-emerald-500/25 hover:shadow-emerald-400/40 flex items-center gap-2"
      >
        <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
          <path stroke-linecap="round" stroke-linejoin="round" d="M12 4v16m8-8H4" />
        </svg>
        新增任務
      </button>
    </div>

    <!-- Task List -->
    <div class="space-y-4">
      @for (task of tasks(); track task.id) {
        <div class="group bg-slate-800/50 backdrop-blur-sm border border-slate-700/50 rounded-xl p-5 hover:border-slate-600 transition-all duration-200 hover:shadow-xl hover:shadow-slate-900/50">
          <div class="flex items-start justify-between gap-4">
            <!-- Task Content -->
            <div class="flex-1 min-w-0">
              <div class="flex items-center gap-3 mb-2">
                <!-- Priority Badge -->
                @switch (task.priority) {
                  @case ('high') {
                    <span class="px-2.5 py-1 text-xs font-semibold rounded-full bg-rose-500/20 text-rose-400 border border-rose-500/30">高優先</span>
                  }
                  @case ('medium') {
                    <span class="px-2.5 py-1 text-xs font-semibold rounded-full bg-amber-500/20 text-amber-400 border border-amber-500/30">中優先</span>
                  }
                  @case ('low') {
                    <span class="px-2.5 py-1 text-xs font-semibold rounded-full bg-sky-500/20 text-sky-400 border border-sky-500/30">低優先</span>
                  }
                }
                <h3 class="text-lg font-semibold text-white truncate">{{ task.title }}</h3>
              </div>

              @if (task.description) {
                <p class="text-slate-400 text-sm mb-3 line-clamp-2">{{ task.description }}</p>
              }

              <div class="flex items-center gap-4 text-sm text-slate-500">
                <!-- Sub-tasks count -->
                @if (task.subTasks.length > 0) {
                  <span class="flex items-center gap-1.5">
                    <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2" />
                    </svg>
                    {{ task.subTasks.length }} 個子任務
                  </span>
                }

                <!-- Tags -->
                @if (task.tags.length > 0) {
                  <div class="flex items-center gap-2 flex-wrap">
                    @for (tag of task.tags; track tag) {
                      <span class="px-2 py-0.5 text-xs rounded-md bg-slate-700/50 text-slate-400">#{{ tag }}</span>
                    }
                  </div>
                }
              </div>
            </div>

            <!-- Actions -->
            <div class="flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity duration-200">
              <button
                (click)="navigateToEdit(task.id)"
                class="p-2 text-slate-400 hover:text-white hover:bg-slate-700/50 rounded-lg transition-colors duration-200"
                title="編輯"
              >
                <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" />
                </svg>
              </button>
              <button
                (click)="deleteTask(task.id)"
                class="p-2 text-slate-400 hover:text-rose-400 hover:bg-rose-500/10 rounded-lg transition-colors duration-200"
                title="刪除"
              >
                <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
                </svg>
              </button>
            </div>
          </div>
        </div>
      } @empty {
        <!-- Empty State -->
        <div class="text-center py-16">
          <div class="inline-flex items-center justify-center w-16 h-16 rounded-full bg-slate-800/50 mb-4">
            <svg xmlns="http://www.w3.org/2000/svg" class="w-8 h-8 text-slate-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
              <path stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2" />
            </svg>
          </div>
          <h3 class="text-lg font-medium text-slate-400 mb-2">尚無任務</h3>
          <p class="text-slate-500 mb-6">點擊上方按鈕建立你的第一個任務</p>
          <button
            (click)="navigateToNew()"
            class="px-5 py-2.5 bg-emerald-500 hover:bg-emerald-400 text-white font-medium rounded-lg transition-all duration-200"
          >
            建立第一個任務
          </button>
        </div>
      }
    </div>
  </div>
</div>

